<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Vocabulary Practice</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      margin: 0;
      background: #f5f5f5;
    }

  /* -.- Vocabulary Count */

    #vocabCount {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 3vw;
      color: #333;
    }

    /* -.- Back Button Styles */
.back-btn {
  position: absolute;
  top: 10px;
  left: 10px;
  font-size: 4vw;
  padding: 6px 12px;
  background-color: #666;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  z-index: 10;
}


  /* -.- Page Title */  

    h1 {
      text-align: center;
      font-size: 6vw;
      margin-bottom: 20px;
    }

  /* -.- Tab Styles */  

    .tabs {
      display: flex;
      justify-content: space-around;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    .tab-btn {
      flex: 1;
      padding: 12px;
      font-size: 4.5vw;
      background-color: #007bff;
      color: white;
      border: none;
      cursor: pointer;
    }
    .tab-btn.active {
      background-color: #0056b3;
    }

    
  /* -.- Section Visibility */

    .section {
      display: none;
    }
    .section.active {
      display: block;
    }
  
  /* -.- Input Group */

    .input-group {
      margin-bottom: 15px;
    }
    input[type="text"] {
      width: 95%;
      padding: 12px;
      font-size: 4.5vw;
      border-radius: 8px;
      border: 1px solid #ccc;
      margin-bottom: 10px;
      margin-left: -2.1px;
      
    }
    button.save-btn {
      background-color: #28a745;
      color: white;
      border: none;
      padding: 12px;
      font-size: 4.5vw;
      border-radius: 8px;
      cursor: pointer;
      width: 100%;
    }

  /* -.- Vocabulary & Group Lists */

    .vocab-list, .group-list {
      margin-top: 20px;
    }

  /* -.- Word & Group Entries */

    .word-entry, .group-entry {
      background: #fff;
      padding: 10px;
      border-radius: 10px;
      margin-bottom: 10px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      position: relative;
    }
    .word-header, .group-name {
      font-size: 5vw;
      font-weight: bold;
      color: #152a9f;
      cursor: pointer;
    }
    .part-of-speech {
      font-size: 4vw;
      color: #555;
      display: inline-block;
      margin-left: 10px;
    }
    .meaning {
      font-size: 4.2vw;
      margin: 5px 0;
      color: #444;
    }
    .extra-info {
      display: none;
      font-size: 3.8vw;
      color: #555;
      margin: 5px 0 10px 10px;
    }
    .action-btns {
      margin-top: 5px;
    }
    .action-btns button {
      font-size: 3.8vw;
      padding: 6px 12px;
      margin-right: 10px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    .edit-btn { background-color: orange; color: white; }
    .delete-btn { background-color: red; color: white; }
    .plus-btn { background-color: #17a2b8; color: white; }
    .delete-group-btn { background-color: #dc3545; color: white; margin-top: 8px; }

  /* -.- Group Popup */

    .group-popup {
      background: #ffffff;
      border: 1px solid #ccc;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      padding: 10px;
      margin-top: 8px;
      font-size: 4vw;
      position: relative;
      z-index: 1;
    }
    .group-popup div {
      padding: 5px;
      cursor: pointer;
    }
    .group-popup div:hover {
      background-color: #f0f0f0;
    }
    

  /* -.- Group Word Item */

    .group-word-item {
      font-size: 4vw;
      margin: 6px 0;
      padding: 6px;
      background: #f9f9f9;
      border-radius: 6px;
      cursor: pointer;
    }

    #groupSearch {
  width: 100%;
  margin-top: 10px;
  padding: 6px 10px;
  font-size: 4.2vw;
  border-radius: 8px;
  border: 1px solid #ccc;
}
   /* -.- Responsive for Desktop */
    @media (min-width: 600px) {
      #vocabCount { font-size: 25px; }
      .back-btn {font-size: 16px;padding: 8px 14px;}
      h1 { font-size: 32px; }
      .tab-btn, .save-btn { font-size: 15px; }
      input[type="text"] { font-size: 16px; }
      .word-header, .group-name { font-size: 20px; }
      .part-of-speech, .group-word-item { font-size: 16px; }
      .meaning, .extra-info, .group-popup { font-size: 16px; }
      .action-btns button, .delete-group-btn { font-size: 14px; }
      #groupSearch {font-size: 20px;width: 99%;padding: 6px 8px;margin-top: 20px;margin-bottom: 10px;}
    }

    .clear-btn {
  background-color: #ff9900;
  color: white;
  border: none;
  padding: 12px;
  font-size: 4.5vw;
  border-radius: 8px;
  cursor: pointer;
  width: 60%;
}
@media (min-width: 600px) {
  .clear-btn {
    font-size: 16px;
    width: 200px;
  }
}


  </style>
</head>
<body>

  <!-- -.- Top Bar -->

<!-- -.- Back Button (Top-Left) -->
<button class="back-btn" onclick="history.back()">
  Back
</button>


<!-- -.- Vocabulary Count (Top-Right) -->
<div id="vocabCount"
     style="position: absolute; top: 10px; right: 10px; color: #333; z-index: 10;">
  ðŸ“˜ Vocabulary Count: 0
</div>

<!-- -.- Page Title -->
<h1>My Vocabulary</h1>


  <!-- -.- Tabs -->

<div class="tabs">
  <button class="tab-btn active" onclick="switchTab('add')">Add New Vocabulary</button>
  <button class="tab-btn" onclick="switchTab('list')">My Vocabulary</button>
  <button class="tab-btn" onclick="switchTab('groups')">Groups</button>
</div>

  <!-- -.- Add Vocabulary Section -->

<div id="add" class="section active">
  <div class="input-group">
    <input type="text" id="newWord" placeholder="Type your new word" />
    <input type="text" id="newPart" placeholder="Part of speech" />
    <input type="text" id="newMeaning" placeholder="Type the meaning" />
    <input type="text" id="newSynonyms" placeholder="Synonyms (optional)" />
    <input type="text" id="newAntonyms" placeholder="Antonyms (optional)" />
    <input type="text" id="newCollocations" placeholder="Collocations (optional)" />
  </div>
  <button class="save-btn" onclick="saveVocab()">Save</button>
  <button class="clear-btn" onclick="clearForm()" style="margin-top: 12px; display: block; margin-left: auto; margin-right: auto;">
  Clear All
</button>



</div>
  
  <!-- -.- Vocabulary List Section -->

<div id="list" class="section">
  <div id="vocabList" class="vocab-list"></div>
</div>

  <!-- -.- Groups Section -->

<div id="groups" class="section">
  <div class="input-group">
    <input type="text" id="newGroup" placeholder="Name the group" />
    <button class="save-btn" onclick="createGroup()">Create Group</button>

    
   <input type="text" id="groupSearch" placeholder="Search the group..." />


  <div id="groupList" class="group-list"></div>
</div>


  <!-- -.- Scripts -->

<script>
  const newWordInput = document.getElementById('newWord');
  const newPartInput = document.getElementById('newPart');
  const newMeaningInput = document.getElementById('newMeaning');
  const newSynonymsInput = document.getElementById('newSynonyms');
  const newAntonymsInput = document.getElementById('newAntonyms');
  const newCollocationsInput = document.getElementById('newCollocations');
  const vocabListEl = document.getElementById('vocabList');
  const vocabCountEl = document.getElementById('vocabCount');
  const newGroupInput = document.getElementById('newGroup');
  const groupListEl = document.getElementById('groupList');
  let unsavedEditData = null;
  let editingIndex = null;

  function switchTab(tab) {
  document.querySelectorAll('.section').forEach(sec => sec.classList.remove('active'));
  document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
  document.getElementById(tab).classList.add('active');

  const tabs = ['add', 'list', 'groups'];
  document.querySelectorAll('.tab-btn')[tabs.indexOf(tab)].classList.add('active');

  if (tab === 'add' && unsavedEditData) {
    newWordInput.value = unsavedEditData.word;
    newPartInput.value = unsavedEditData.part;
    newMeaningInput.value = unsavedEditData.meaning;
    newSynonymsInput.value = unsavedEditData.synonyms || '';
    newAntonymsInput.value = unsavedEditData.antonyms || '';
    newCollocationsInput.value = unsavedEditData.collocations || '';
  }

  if (tab === 'list') displayVocab();
  if (tab === 'groups') displayGroups();
}


  function updateVocabCount(count) {
    vocabCountEl.textContent = `ðŸ“˜ Vocabulary Count: ${count}`;
  }

  function saveVocab() {
  const word = newWordInput.value.trim();
  const part = newPartInput.value.trim();
  const meaning = newMeaningInput.value.trim();
  const synonyms = newSynonymsInput.value.trim();
  const antonyms = newAntonymsInput.value.trim();
  const collocations = newCollocationsInput.value.trim();

  if (!word || !meaning) {
    alert('Please fill in at least word and meaning.');
    return;
  }

  const vocabData = JSON.parse(localStorage.getItem('vocabList')) || [];
  const newEntry = { word, part, meaning, synonyms, antonyms, collocations };

  if (editingIndex !== null) {
    vocabData[editingIndex] = newEntry;
  } else {
    vocabData.push(newEntry);
  }

  localStorage.setItem('vocabList', JSON.stringify(vocabData));

  // Clear form and reset state
  newWordInput.value = '';
  newPartInput.value = '';
  newMeaningInput.value = '';
  newSynonymsInput.value = '';
  newAntonymsInput.value = '';
  newCollocationsInput.value = '';
  unsavedEditData = null;
  editingIndex = null;

  alert('Saved successfully!');
  updateVocabCount(vocabData.length);
}

function clearForm() {
  newWordInput.value = '';
  newPartInput.value = '';
  newMeaningInput.value = '';
  newSynonymsInput.value = '';
  newAntonymsInput.value = '';
  newCollocationsInput.value = '';
  unsavedEditData = null;
  editingIndex = null;
}


  function displayVocab() {
  const vocabData = JSON.parse(localStorage.getItem('vocabList')) || [];
  updateVocabCount(vocabData.length);
  vocabListEl.innerHTML = '';

  vocabData.forEach((entry, index) => {
    const container = document.createElement('div');
    container.className = 'word-entry';

    const header = document.createElement('div');
    header.className = 'word-header';
    header.textContent = entry.word;

    const pos = document.createElement('span');
    pos.className = 'part-of-speech';
    pos.textContent = entry.part ? `(${entry.part})` : '';
    header.appendChild(pos);

    const meaning = document.createElement('div');
    meaning.className = 'meaning';
    meaning.textContent = entry.meaning;
    meaning.style.display = 'none';

    const extra = document.createElement('div');
    extra.className = 'extra-info';
    extra.style.display = 'none';

    if (entry.synonyms)
      extra.innerHTML += `<div><strong>Synonyms:</strong> ${entry.synonyms}</div>`;
    if (entry.antonyms)
      extra.innerHTML += `<div><strong>Antonyms:</strong> ${entry.antonyms}</div>`;
    if (entry.collocations)
      extra.innerHTML += `<div><strong>Collocations:</strong> ${entry.collocations}</div>`;

    const closeBtn = document.createElement('button');
    closeBtn.textContent = 'Close';
    closeBtn.style.marginTop = '10px';
    closeBtn.style.backgroundColor = '#888';
    closeBtn.style.color = 'white';
    closeBtn.style.border = 'none';
    closeBtn.style.padding = '6px 10px';
    closeBtn.style.borderRadius = '6px';
    closeBtn.style.cursor = 'pointer';
    closeBtn.style.display = 'none';

    let clickStage = 0;

    header.onclick = () => {
      if (clickStage === 0) {
        meaning.style.display = 'block';
        extra.style.display = 'none';
        closeBtn.style.display = 'none';
        clickStage = 1;
      } else if (clickStage === 1) {
        extra.style.display = 'block';
        closeBtn.style.display = 'inline-block';
        clickStage = 2;
      }
    };

    closeBtn.onclick = (e) => {
      e.stopPropagation();
      meaning.style.display = 'none';
      extra.style.display = 'none';
      closeBtn.style.display = 'none';
      clickStage = 0;
    };

    extra.appendChild(closeBtn);

    const buttons = document.createElement('div');
    buttons.className = 'action-btns';

    const editBtn = document.createElement('button');
    editBtn.className = 'edit-btn';
    editBtn.textContent = 'Edit';
    editBtn.onclick = () => editVocab(index);

    const deleteBtn = document.createElement('button');
    deleteBtn.className = 'delete-btn';
    deleteBtn.textContent = 'Delete';
    deleteBtn.onclick = () => deleteVocab(index);

    const plusBtn = document.createElement('button');
    plusBtn.className = 'plus-btn';
    plusBtn.textContent = '+';
    plusBtn.onclick = () => showGroupPopup(container, entry);

    buttons.appendChild(editBtn);
    buttons.appendChild(deleteBtn);
    buttons.appendChild(plusBtn);

    container.appendChild(header);
    container.appendChild(meaning);
    container.appendChild(extra);
    container.appendChild(buttons);

    vocabListEl.appendChild(container);
  });
}


  function showGroupPopup(container, word) {
    document.querySelectorAll('.group-popup').forEach(p => p.remove());

    const groups = JSON.parse(localStorage.getItem('vocabGroups')) || [];
    if (groups.length === 0) {
      alert("No groups found. Please create a group first.");
      return;
    }

    const popup = document.createElement('div');
    popup.className = 'group-popup';

    groups.forEach((group, i) => {
      const item = document.createElement('div');
      item.textContent = group.name;
      item.onclick = () => {
        groups[i].words = groups[i].words || [];
        groups[i].words.push(word);
        localStorage.setItem('vocabGroups', JSON.stringify(groups));
        popup.remove();
        alert(`Added to group "${group.name}"`);
      };
      popup.appendChild(item);
    });

    container.appendChild(popup);
  }

  function editVocab(index) {
  const vocabData = JSON.parse(localStorage.getItem('vocabList')) || [];
  const entry = vocabData[index];

  newWordInput.value = entry.word;
  newPartInput.value = entry.part;
  newMeaningInput.value = entry.meaning;
  newSynonymsInput.value = entry.synonyms || '';
  newAntonymsInput.value = entry.antonyms || '';
  newCollocationsInput.value = entry.collocations || '';

  unsavedEditData = { ...entry };
  editingIndex = index;

  switchTab('add');
}


  function deleteVocab(index) {
    const vocabData = JSON.parse(localStorage.getItem('vocabList')) || [];
    if (confirm("Delete this word?")) {
      vocabData.splice(index, 1);
      localStorage.setItem('vocabList', JSON.stringify(vocabData));
      updateVocabCount(vocabData.length);
      displayVocab();
    }
  }

  function createGroup() {
    const name = newGroupInput.value.trim();
    if (!name) {
      alert("Group name cannot be empty.");
      return;
    }

    const groupData = JSON.parse(localStorage.getItem('vocabGroups')) || [];
    groupData.unshift({ name, words: [] });
    localStorage.setItem('vocabGroups', JSON.stringify(groupData));
    newGroupInput.value = '';
    displayGroups();
  }

  function deleteGroup(index) {
    const groupData = JSON.parse(localStorage.getItem('vocabGroups')) || [];
    if (confirm(`Delete group "${groupData[index].name}"?`)) {
      groupData.splice(index, 1);
      localStorage.setItem('vocabGroups', JSON.stringify(groupData));
      displayGroups();
    }
  }

  function displayGroups() {
  const groupData = JSON.parse(localStorage.getItem('vocabGroups')) || [];
  const filter = document.getElementById('groupSearch')?.value?.toLowerCase() || '';
  groupListEl.innerHTML = '';

  groupData.forEach((group, index) => {
    if (!group.name.toLowerCase().includes(filter)) return; // filter by name

    const groupEl = document.createElement('div');
    groupEl.className = 'group-entry';

    const groupName = document.createElement('div');
    groupName.className = 'group-name';
    groupName.textContent = group.name;

    const groupWords = document.createElement('div');
    groupWords.className = 'group-words';
    groupWords.style.display = 'none';

    groupName.onclick = () => {
      groupWords.style.display = groupWords.style.display === 'block' ? 'none' : 'block';
    };

    (group.words || []).forEach((word, wordIndex) => {
      const item = document.createElement('div');
      item.className = 'group-word-item';
      item.innerHTML = `<strong>${word.word}</strong> (${word.part || 'â€”'})<br>${word.meaning}`;

      const extra = document.createElement('div');
      extra.className = 'extra-info';
      extra.style.display = 'none';

      if (word.synonyms)
        extra.innerHTML += `<div><strong>Synonyms:</strong> ${word.synonyms}</div>`;
      if (word.antonyms)
        extra.innerHTML += `<div><strong>Antonyms:</strong> ${word.antonyms}</div>`;
      if (word.collocations)
        extra.innerHTML += `<div><strong>Collocations:</strong> ${word.collocations}</div>`;

      const removeBtn = document.createElement('button');
      removeBtn.textContent = 'Remove from group';
      removeBtn.style.marginTop = '10px';
      removeBtn.style.backgroundColor = '#dc3545';
      removeBtn.style.color = 'white';
      removeBtn.style.border = 'none';
      removeBtn.style.padding = '6px 10px';
      removeBtn.style.borderRadius = '6px';
      removeBtn.style.cursor = 'pointer';
      removeBtn.onclick = () => {
        group.words.splice(wordIndex, 1);
        localStorage.setItem('vocabGroups', JSON.stringify(groupData));
        displayGroups();
      };

      extra.appendChild(removeBtn);

      item.onclick = () => {
        extra.style.display = extra.style.display === 'block' ? 'none' : 'block';
      };

      groupWords.appendChild(item);
      groupWords.appendChild(extra);
    });

    const deleteBtn = document.createElement('button');
    deleteBtn.className = 'delete-group-btn';
    deleteBtn.textContent = 'Delete Group';
    deleteBtn.onclick = () => deleteGroup(index);

    groupEl.appendChild(groupName);
    groupEl.appendChild(groupWords);
    groupEl.appendChild(deleteBtn);
    groupListEl.appendChild(groupEl);
  });
}

  updateVocabCount(JSON.parse(localStorage.getItem('vocabList'))?.length || 0);
  document.getElementById('groupSearch').addEventListener('input', displayGroups);

</script>

</body>
</html>
